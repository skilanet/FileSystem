# FATReadme.md

## Менеджер FAT (FATManager)

Управляет таблицей размещения файлов (FAT), которая хранит цепочки кластеров для файлов и каталогов.

### Основные функции

**initialize_and_flush(header)**

- Создает пустую FAT таблицу при форматировании
- Помечает корневой каталог как конец цепочки (EOF)

**load(header)**

- Загружает FAT таблицу с диска в память

**get_entry(cluster_idx)**

- Возвращает значение FAT записи для указанного кластера
- Значение может быть: номер следующего кластера, EOF или FREE

**set_entry(cluster_idx, value)**

- Устанавливает значение FAT записи и сразу сохраняет на диск

**get_cluster_chain(start_cluster)**

- Проходит по цепочке кластеров от начального до EOF
- Возвращает список всех кластеров в цепочке

**free_chain(start_cluster)**

- Освобождает всю цепочку кластеров, начиная с указанного
- Помечает все кластеры цепочки как FREE

**append_to_chain(last_cluster, new_cluster)**

- Добавляет новый кластер в конец существующей цепочки
- Обновляет FAT записи для связывания кластеров

### Маркеры FAT

- `0x00000000` (FREE) - свободный кластер
- `0xFFFFFFFF` (EOF) - конец цепочки
- Любое другое значение — индекс следующего кластера